@model Question

@{
    ViewData["Title"] = "Добавить вопрос";
}

<h2>Добавить вопрос</h2>

<form asp-action="Create" method="post">
    <input type="hidden" name="SurveyId" value="@ViewBag.SurveyId" />

    <div class="form-group">
        <label for="Text">Текст вопроса</label>
        <input type="text" asp-for="Text" class="form-control" required />
    </div>

    <div class="form-group">
        <label for="Type">Тип вопроса</label>
        <select asp-for="Type" class="form-control">
            <option value="0">Текстовый ввод</option>
            <option value="1">Один вариант (радиокнопки)</option>
            <option value="2">Несколько вариантов (чекбоксы)</option>
        </select>
    </div>

    <div id="answer-options-container" class="form-group" style="display: none;">
        <label for="AnswerOptions">Варианты ответа</label>
        <div id="answer-options-list">
            <input type="text" name="answerOptions[]" class="form-control mb-2" />
        </div>
        <button type="button" id="add-option" class="btn btn-secondary">Добавить вариант</button>
    </div>

    <button type="submit" class="btn btn-primary mt-3">Сохранить</button>
</form>

@section Scripts {
    <script>
        const typeSelector = document.querySelector('[asp-for="Type"]');
        const optionsContainer = document.getElementById('answer-options-container');
        const addOptionButton = document.getElementById('add-option');
        const optionsList = document.getElementById('answer-options-list');

        typeSelector.addEventListener('change', () => {
            if (typeSelector.value === "1" || typeSelector.value === "2") {
                optionsContainer.style.display = "block";
            } else {
                optionsContainer.style.display = "none";
            }
        });

        addOptionButton.addEventListener('click', () => {
            const input = document.createElement('input');
            input.type = "text";
            input.name = "answerOptions[]";
            input.className = "form-control mb-2";
            optionsList.appendChild(input);
        });
    </script>
}
